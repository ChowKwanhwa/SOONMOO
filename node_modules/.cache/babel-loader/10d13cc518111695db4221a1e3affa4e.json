{"ast":null,"code":"/**\n * WebSocket implements a browser-side WebSocket specification.\n * @module Client\n */\n\"use strict\";\n\nvar _defineProperty = require(\"/workspaces/SOONMOO/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst eventemitter3_1 = require(\"eventemitter3\");\nclass WebSocketBrowserImpl extends eventemitter3_1.EventEmitter {\n  /** Instantiate a WebSocket class\n   * @constructor\n   * @param {String} address - url to a websocket server\n   * @param {(Object)} options - websocket options\n   * @param {(String|Array)} protocols - a list of protocols\n   * @return {WebSocketBrowserImpl} - returns a WebSocket instance\n   */\n  constructor(address, options, protocols) {\n    super();\n    _defineProperty(this, \"socket\", void 0);\n    this.socket = new window.WebSocket(address, protocols);\n    this.socket.onopen = () => this.emit(\"open\");\n    this.socket.onmessage = event => this.emit(\"message\", event.data);\n    this.socket.onerror = error => this.emit(\"error\", error);\n    this.socket.onclose = event => {\n      this.emit(\"close\", event.code, event.reason);\n    };\n  }\n  /**\n   * Sends data through a websocket connection\n   * @method\n   * @param {(String|Object)} data - data to be sent via websocket\n   * @param {Object} optionsOrCallback - ws options\n   * @param {Function} callback - a callback called once the data is sent\n   * @return {Undefined}\n   */\n  send(data, optionsOrCallback, callback) {\n    const cb = callback || optionsOrCallback;\n    try {\n      this.socket.send(data);\n      cb();\n    } catch (error) {\n      cb(error);\n    }\n  }\n  /**\n   * Closes an underlying socket\n   * @method\n   * @param {Number} code - status code explaining why the connection is being closed\n   * @param {String} reason - a description why the connection is closing\n   * @return {Undefined}\n   * @throws {Error}\n   */\n  close(code, reason) {\n    this.socket.close(code, reason);\n  }\n  addEventListener(type, listener, options) {\n    this.socket.addEventListener(type, listener, options);\n  }\n}\n/**\n * factory method for common WebSocket instance\n * @method\n * @param {String} address - url to a websocket server\n * @param {(Object)} options - websocket options\n * @return {Undefined}\n */\nfunction default_1(address, options) {\n  return new WebSocketBrowserImpl(address, options);\n}\nexports.default = default_1;","map":{"version":3,"names":["_defineProperty","require","default","Object","defineProperty","exports","value","eventemitter3_1","WebSocketBrowserImpl","EventEmitter","constructor","address","options","protocols","socket","window","WebSocket","onopen","emit","onmessage","event","data","onerror","error","onclose","code","reason","send","optionsOrCallback","callback","cb","close","addEventListener","type","listener","default_1"],"sources":["/workspaces/SOONMOO/node_modules/rpc-websockets/dist/lib/client/websocket.browser.js"],"sourcesContent":["/**\n * WebSocket implements a browser-side WebSocket specification.\n * @module Client\n */\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst eventemitter3_1 = require(\"eventemitter3\");\nclass WebSocketBrowserImpl extends eventemitter3_1.EventEmitter {\n    socket;\n    /** Instantiate a WebSocket class\n     * @constructor\n     * @param {String} address - url to a websocket server\n     * @param {(Object)} options - websocket options\n     * @param {(String|Array)} protocols - a list of protocols\n     * @return {WebSocketBrowserImpl} - returns a WebSocket instance\n     */\n    constructor(address, options, protocols) {\n        super();\n        this.socket = new window.WebSocket(address, protocols);\n        this.socket.onopen = () => this.emit(\"open\");\n        this.socket.onmessage = (event) => this.emit(\"message\", event.data);\n        this.socket.onerror = (error) => this.emit(\"error\", error);\n        this.socket.onclose = (event) => {\n            this.emit(\"close\", event.code, event.reason);\n        };\n    }\n    /**\n     * Sends data through a websocket connection\n     * @method\n     * @param {(String|Object)} data - data to be sent via websocket\n     * @param {Object} optionsOrCallback - ws options\n     * @param {Function} callback - a callback called once the data is sent\n     * @return {Undefined}\n     */\n    send(data, optionsOrCallback, callback) {\n        const cb = callback || optionsOrCallback;\n        try {\n            this.socket.send(data);\n            cb();\n        }\n        catch (error) {\n            cb(error);\n        }\n    }\n    /**\n     * Closes an underlying socket\n     * @method\n     * @param {Number} code - status code explaining why the connection is being closed\n     * @param {String} reason - a description why the connection is closing\n     * @return {Undefined}\n     * @throws {Error}\n     */\n    close(code, reason) {\n        this.socket.close(code, reason);\n    }\n    addEventListener(type, listener, options) {\n        this.socket.addEventListener(type, listener, options);\n    }\n}\n/**\n * factory method for common WebSocket instance\n * @method\n * @param {String} address - url to a websocket server\n * @param {(Object)} options - websocket options\n * @return {Undefined}\n */\nfunction default_1(address, options) {\n    return new WebSocketBrowserImpl(address, options);\n}\nexports.default = default_1;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,YAAY;;AAAC,IAAAA,eAAA,GAAAC,OAAA,8EAAAC,OAAA;AACbC,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7D,MAAMC,eAAe,GAAGN,OAAO,CAAC,eAAe,CAAC;AAChD,MAAMO,oBAAoB,SAASD,eAAe,CAACE,YAAY,CAAC;EAE5D;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,WAAWA,CAACC,OAAO,EAAEC,OAAO,EAAEC,SAAS,EAAE;IACrC,KAAK,CAAC,CAAC;IAACb,eAAA;IACR,IAAI,CAACc,MAAM,GAAG,IAAIC,MAAM,CAACC,SAAS,CAACL,OAAO,EAAEE,SAAS,CAAC;IACtD,IAAI,CAACC,MAAM,CAACG,MAAM,GAAG,MAAM,IAAI,CAACC,IAAI,CAAC,MAAM,CAAC;IAC5C,IAAI,CAACJ,MAAM,CAACK,SAAS,GAAIC,KAAK,IAAK,IAAI,CAACF,IAAI,CAAC,SAAS,EAAEE,KAAK,CAACC,IAAI,CAAC;IACnE,IAAI,CAACP,MAAM,CAACQ,OAAO,GAAIC,KAAK,IAAK,IAAI,CAACL,IAAI,CAAC,OAAO,EAAEK,KAAK,CAAC;IAC1D,IAAI,CAACT,MAAM,CAACU,OAAO,GAAIJ,KAAK,IAAK;MAC7B,IAAI,CAACF,IAAI,CAAC,OAAO,EAAEE,KAAK,CAACK,IAAI,EAAEL,KAAK,CAACM,MAAM,CAAC;IAChD,CAAC;EACL;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,IAAIA,CAACN,IAAI,EAAEO,iBAAiB,EAAEC,QAAQ,EAAE;IACpC,MAAMC,EAAE,GAAGD,QAAQ,IAAID,iBAAiB;IACxC,IAAI;MACA,IAAI,CAACd,MAAM,CAACa,IAAI,CAACN,IAAI,CAAC;MACtBS,EAAE,CAAC,CAAC;IACR,CAAC,CACD,OAAOP,KAAK,EAAE;MACVO,EAAE,CAACP,KAAK,CAAC;IACb;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIQ,KAAKA,CAACN,IAAI,EAAEC,MAAM,EAAE;IAChB,IAAI,CAACZ,MAAM,CAACiB,KAAK,CAACN,IAAI,EAAEC,MAAM,CAAC;EACnC;EACAM,gBAAgBA,CAACC,IAAI,EAAEC,QAAQ,EAAEtB,OAAO,EAAE;IACtC,IAAI,CAACE,MAAM,CAACkB,gBAAgB,CAACC,IAAI,EAAEC,QAAQ,EAAEtB,OAAO,CAAC;EACzD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASuB,SAASA,CAACxB,OAAO,EAAEC,OAAO,EAAE;EACjC,OAAO,IAAIJ,oBAAoB,CAACG,OAAO,EAAEC,OAAO,CAAC;AACrD;AACAP,OAAO,CAACH,OAAO,GAAGiC,SAAS","ignoreList":[]},"metadata":{},"sourceType":"script"}